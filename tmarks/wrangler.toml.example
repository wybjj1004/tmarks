name = "tmarks"
compatibility_date = "2024-03-18"
pages_build_output_dir = ".deploy"

# ⚠️ 重要说明：
# D1、KV 和 R2 资源绑定请在 Cloudflare Pages Dashboard 中配置
# 路径：项目设置 → 函数 → 绑定
#
# 需要绑定的资源：
# - D1 数据库：变量名 DB，选择数据库 tmarks-prod-db
# - KV 命名空间：变量名 TMARKS_KV（用于公开分享缓存等）
# - R2 存储桶：变量名 SNAPSHOTS_BUCKET，选择存储桶 tmarks-snapshots（用于网页快照）
#
# 这样配置的好处：
# 1. 不需要在代码中暴露资源 ID
# 2. 拉取更新时不会覆盖你的配置
# 3. 更安全，更灵活

[vars]
ALLOW_REGISTRATION = "true"
ENVIRONMENT = "production"
JWT_ACCESS_TOKEN_EXPIRES_IN = "365d"
JWT_REFRESH_TOKEN_EXPIRES_IN = "365d"

# R2 相关配置（用于网页快照 & 图片存储）
# 在本地开发时可以直接在这里填写；生产环境建议在 Dashboard → 环境变量 中配置真实值
# R2_PUBLIC_URL：可选，封面图使用 R2 存储时的对外访问域名（用于生成封面图 URL）
# 例如：https://tmarks-snapshots.example.com 或 https://<account-id>.r2.cloudflarestorage.com/tmarks-snapshots
# R2_MAX_TOTAL_BYTES：R2 总存储上限（字节），可选；不配置或 <= 0 表示不限制（如需限制可手动设置，例如 7GiB）
# R2_PUBLIC_URL = "https://tmarks-snapshots.example.com"
# R2_MAX_TOTAL_BYTES = "7516192768"

# ⚠️ 敏感环境变量请在 Dashboard 中配置：
# 路径：项目设置 → 环境变量 → 生产环境
# - JWT_SECRET
# - ENCRYPTION_KEY
#
# 示例（仅供参考，请不要在仓库中提交真实密钥）：
JWT_SECRET = "your-long-random-jwt-secret-at-least-48-characters"
ENCRYPTION_KEY = "your-long-random-encryption-key-at-least-48-characters"